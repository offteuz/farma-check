# Configurações básicas da aplicação
spring.application.name=farmacheck

# ==== Azure Application Insights ====
# Local: pode deixar em branco (telemetria desativada).
# Produção (Azure): defina APPLICATIONINSIGHTS_CONNECTION_STRING nas App Settings.
azure.application-insights.enabled=${AZURE_APPLICATIONINSIGHTS_ENABLED:false}
azure.application-insights.instrumentation-key=${APPLICATIONINSIGHTS_INSTRUMENTATION_KEY:}
# A connection string tem prioridade sobre instrumentation key
applicationinsights.connection.string=${APPLICATIONINSIGHTS_CONNECTION_STRING:}

# ==== Banco de Dados ====
# Local (padrão): H2 em memória. Só rodar ./mvnw spring-boot:run
# Produção (Azure): defina SPRING_DATASOURCE_URL, SPRING_DATASOURCE_USERNAME,
# SPRING_DATASOURCE_PASSWORD e SPRING_PROFILES_ACTIVE=azure.
# Mais detalhes em .env.example ou DEPLOY_AZURE.md
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:h2:mem:feedbacksystemdb}
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER:org.h2.Driver}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:admin}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:admin}
spring.datasource.hikari.maximum-pool-size=${SPRING_DATASOURCE_HIKARI_MAX_POOL_SIZE:10}
spring.datasource.hikari.minimum-idle=${SPRING_DATASOURCE_HIKARI_MIN_IDLE:5}
spring.datasource.hikari.connection-timeout=${SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT:20000}

# Console do H2 (visualizar em http://localhost:8080/h2-console)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# ==== Hibernate / JPA ====
# Dialeto muda conforme banco (H2 local, MySQL no Azure).
# ddl-auto=update cria/atualiza tabelas automaticamente.
spring.jpa.database-platform=${SPRING_JPA_DATABASE_PLATFORM:org.hibernate.dialect.H2Dialect}
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:update}
spring.jpa.show-sql=true

# ==== Logs ====
# INFO global para pontos principais.
logging.level.root=INFO
# DEBUG nos controladores para acompanhar requisições.
logging.level.com.fiap.feedbacksystem.controller=DEBUG
# INFO nos serviços (menos verboso).
logging.level.com.fiap.feedbacksystem.service=INFO

# Configuracao de JWT (Token)
api.security.token.secret=${JWT_SECRET:my-secret-key}

# Formato do console
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %logger{36} - %level - %msg%n
